{% extends 'base/cmi-index.html' %} {% load static %} {% block title %} Forum |
AANR Knowledge Hub {% endblock %} {% block stylesheet %}
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
/>
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css"
/>
<style>
  :root {
    --primary: #2c6e49;
    --primary-dark: #1a5632;
    --primary-light: #4c956c;
    --secondary: #4c956c;
    --accent: #90e0c9;
    --accent-light: #d8f3ea;
    --light: #f8f9fa;
    --dark: #212529;
    --text-color: #333;
    --text-muted: #6c757d;
    --section-padding: 3rem 0;
    --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    --transition-slow: all 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);
    --border-radius: 12px;
    --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    --box-shadow-hover: 0 8px 20px rgba(0, 0, 0, 0.1);
  }

  body {
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    color: var(--text-color);
    background-color: #f9f9f9;
    line-height: 1.6;
  }

  .main-content {
    min-height: 80vh;
    padding: 3rem 0 4rem;
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
  }

  /* Forum Header Section */
  .forum-header {
    margin: 30px 0 2.5rem 0;
    border-radius: var(--border-radius);
    position: relative;
    background-color: transparent;
    overflow: hidden;
    box-shadow: var(--box-shadow);
    transition: var(--transition);
    transform: translateY(0);
    height: 400px;
  }

  .forum-header:hover {
    box-shadow: var(--box-shadow-hover);
    transform: translateY(-5px);
  }

  .forum-header-content {
    padding: 2rem;
    position: relative;
    z-index: 2;
    text-align: center;
    background-color: rgba(0, 0, 0, 0.4);
    transition: var(--transition);
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }

  .forum-header:hover .forum-header-content {
    background-color: rgba(0, 0, 0, 0.6);
  }

  .forum-background-img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0.8;
    z-index: 1;
    transition: var(--transition-slow);
    transform: scale(1);
  }

  .forum-header:hover .forum-background-img {
    transform: scale(1.05);
    opacity: 0.4;
  }

  .forum-title {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 1.2rem;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.4);
    color: white;
    transition: var(--transition);
  }

  .forum-header:hover .forum-title {
    transform: translateY(-5px);
  }

  .forum-subtitle {
    font-size: 1.2rem;
    margin-bottom: 2rem;
    max-width: 700px;
    margin-left: auto;
    margin-right: auto;
    line-height: 1.7;
    color: white;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
  }

  .ask-question-btn {
    background-color: white;
    color: var(--primary);
    border: none;
    border-radius: 50px;
    padding: 14px 30px;
    font-weight: 600;
    font-size: 1.1rem;
    cursor: pointer;
    transition: var(--transition);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    display: inline-flex;
    align-items: center;
    gap: 0.8rem;
    position: relative;
    overflow: hidden;
    z-index: 1;
  }

  .ask-question-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background-color: var(--accent-light);
    transition: var(--transition);
    z-index: -1;
  }

  .ask-question-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 15px rgba(0, 0, 0, 0.15);
    color: var(--primary-dark);
  }

  .ask-question-btn:hover::before {
    left: 0;
  }

  .ask-question-btn i {
    transition: var(--transition);
  }

  .ask-question-btn:hover i {
    transform: rotate(90deg);
  }

  /* Search Section */
  .search-section {
    margin-bottom: 2.5rem;
  }

  .search-container {
    display: flex;
    flex-wrap: wrap;
    gap: 1.2rem;
    align-items: center;
    background-color: white;
    border-radius: var(--border-radius);
    padding: 1.8rem;
    box-shadow: var(--box-shadow);
    transition: var(--transition);
  }

  .search-container:hover {
    box-shadow: var(--box-shadow-hover);
  }

  .search-input-wrapper {
    flex-grow: 1;
    position: relative;
  }

  .search-input {
    width: 100%;
    padding: 14px 20px;
    border: 1px solid #e0e0e0;
    border-radius: 50px;
    font-size: 1rem;
    transition: var(--transition);
    color: var(--text-color);
    background-color: #f5f7fa;
  }

  .search-input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(44, 110, 73, 0.2);
    background-color: white;
  }

  .search-icon {
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: #aaa;
    pointer-events: none;
    transition: var(--transition);
  }

  .search-input:focus + .search-icon {
    color: var(--primary);
  }

  .filter-dropdown {
    position: relative;
  }

  .filter-button {
    background-color: var(--primary);
    color: white;
    border: none;
    border-radius: 50px;
    padding: 14px 20px;
    font-weight: 500;
    cursor: pointer;
    transition: var(--transition);
    display: flex;
    align-items: center;
    gap: 0.8rem;
  }

  .filter-button:hover {
    background-color: var(--primary-dark);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    transform: translateY(-2px);
  }

  .filter-button i:last-child {
    transition: var(--transition);
  }

  .filter-button:hover i:last-child {
    transform: translateY(2px);
  }

  .filter-menu {
    position: absolute;
    top: 100%;
    right: 0;
    width: 280px;
    background-color: white;
    border-radius: 15px;
    box-shadow: 0 5px 25px rgba(0, 0, 0, 0.15);
    padding: 1.2rem;
    z-index: 10;
    margin-top: 0.8rem;
    display: none;
    transform: translateY(20px);
    opacity: 0;
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  .filter-menu.show {
    display: block;
    animation: fadeIn 0.3s forwards;
    transform: translateY(0);
    opacity: 1;
  }

  .filter-menu::before {
    content: '';
    position: absolute;
    top: -10px;
    right: 25px;
    width: 20px;
    height: 20px;
    background-color: white;
    transform: rotate(45deg);
    border-radius: 3px;
  }

  .filter-item {
    display: flex;
    align-items: center;
    gap: 0.8rem;
    padding: 0.8rem 0.7rem;
    cursor: pointer;
    border-radius: 8px;
    transition: var(--transition);
    color: var(--text-color);
    margin-bottom: 0.3rem;
  }

  .filter-item:hover {
    background-color: var(--accent-light);
  }

  .filter-item label {
    display: flex;
    align-items: center;
    gap: 0.8rem;
    cursor: pointer;
    width: 100%;
    margin-bottom: 0;
    font-weight: 500;
  }

  .filter-checkbox {
    width: 20px;
    height: 20px;
    cursor: pointer;
    accent-color: var(--primary);
  }

  .search-button {
    background-color: var(--primary);
    color: white;
    border: none;
    border-radius: 50px;
    padding: 14px 28px;
    font-weight: 500;
    font-size: 1rem;
    cursor: pointer;
    transition: var(--transition);
    display: flex;
    align-items: center;
    gap: 0.8rem;
    position: relative;
    overflow: hidden;
    z-index: 1;
  }

  .search-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background-color: var(--primary-dark);
    transition: var(--transition);
    z-index: -1;
  }

  .search-button:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
  }

  .search-button:hover::before {
    left: 0;
  }

  /* Topic Pills */
  .topic-pills {
    display: flex;
    flex-wrap: nowrap;
    overflow-x: auto;
    gap: 0.8rem;
    margin: 0 0 1.5rem 0;
    padding: 1.2rem 1.5rem;
    background-color: white;
    border-radius: var(--border-radius);
    box-shadow: var(--box-shadow);
    -ms-overflow-style: none;
    scrollbar-width: none;
    transition: var(--transition);
    position: relative;
  }

  .topic-pills:hover {
    box-shadow: var(--box-shadow-hover);
  }

  .topic-pills::-webkit-scrollbar {
    display: none;
  }

  .topic-pill {
    flex: 0 0 auto;
    white-space: nowrap;
    padding: 10px 20px;
    background-color: #f5f7fa;
    border-radius: 30px;
    color: var(--text-color);
    font-weight: 500;
    cursor: pointer;
    transition: var(--transition);
    border: 2px solid transparent;
  }

  .topic-pill:hover {
    background-color: var(--accent-light);
    transform: translateY(-2px);
  }

  .topic-pill.active {
    background-color: var(--primary);
    color: white;
  }

  /* Tabs Section */
  .forum-tabs {
    display: flex;
    border-bottom: 2px solid #e0e0e0;
    margin-bottom: 2rem;
    position: relative;
  }

  .forum-tab {
    padding: 1.2rem 1.8rem;
    background: none;
    border: none;
    font-weight: 600;
    color: var(--text-muted);
    cursor: pointer;
    transition: var(--transition);
    position: relative;
    overflow: hidden;
  }

  .forum-tab.active {
    color: var(--primary);
  }

  .forum-tab.active::after {
    content: "";
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 100%;
    height: 3px;
    background-color: var(--primary);
    animation: slideIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  @keyframes slideIn {
    from {
      transform: scaleX(0);
    }
    to {
      transform: scaleX(1);
    }
  }

  .forum-tab:hover {
    color: var(--primary);
  }

  .forum-tab i {
    margin-right: 0.5rem;
    transition: var(--transition);
  }

  .forum-tab:hover i {
    transform: translateY(-2px);
  }

  /* Display Controls */
  .display-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    background-color: white;
    padding: 1rem 1.5rem;
    border-radius: var(--border-radius);
    box-shadow: var(--box-shadow);
  }

  .items-per-page {
    display: flex;
    align-items: center;
    gap: 0.8rem;
    color: var(--text-color);
    font-weight: 500;
  }

  .items-select {
    padding: 0.6rem 1rem;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    background-color: #f5f7fa;
    cursor: pointer;
    color: var(--text-color);
    font-weight: 500;
    transition: var(--transition);
    appearance: none;
    background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 24 24' fill='none' stroke='%232c6e49' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 0.7rem center;
    padding-right: 2rem;
  }

  .items-select:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(44, 110, 73, 0.1);
    background-color: white;
  }

  /* Post Cards */
  .forum-posts {
    display: flex;
    flex-direction: column;
    gap: 1.8rem;
    margin-bottom: 2.5rem;
  }

  .post-card {
    background-color: white;
    border-radius: var(--border-radius);
    overflow: hidden;
    box-shadow: var(--box-shadow);
    transition: var(--transition);
    border: 1px solid transparent;
    position: relative;
  }

  .post-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--box-shadow-hover);
    border-color: var(--accent);
  }

  .post-header {
    display: flex;
    padding: 1.8rem;
    border-bottom: 1px solid #f0f0f0;
  }

  .post-avatar {
    width: 55px;
    height: 55px;
    border-radius: 50%;
    overflow: hidden;
    margin-right: 1.2rem;
    border: 3px solid var(--accent);
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
    transition: var(--transition);
  }

  .post-card:hover .post-avatar {
    transform: scale(1.05);
  }

  .post-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: var(--transition);
  }

  .post-card:hover .post-avatar img {
    transform: scale(1.1);
  }

  .post-meta {
    flex-grow: 1;
  }

  .post-author {
    display: flex;
    align-items: center;
    gap: 0.8rem;
    margin-bottom: 0.6rem;
  }

  .author-name {
    font-weight: 600;
    color: var(--text-color);
  }

  .author-role {
    background-color: var(--accent-light);
    color: var(--primary);
    padding: 3px 10px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 500;
  }

  .post-title {
    font-size: 1.25rem;
    font-weight: 700;
    margin-bottom: 0.8rem;
    color: var(--primary);
    text-decoration: none;
    transition: var(--transition);
    display: block;
  }

  .post-title:hover {
    color: var(--primary-dark);
  }

  .thread-status {
    display: inline-block;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 600;
    margin-bottom: 0.8rem;
  }

  .status-resolved {
    background-color: #e3f7e8;
    color: #28a745;
  }

  .post-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.6rem;
    margin-bottom: 0.8rem;
  }

  .post-tag {
    background-color: rgba(44, 110, 73, 0.08);
    color: var(--primary);
    padding: 5px 12px;
    border-radius: 30px;
    font-size: 0.85rem;
    text-decoration: none;
    transition: var(--transition);
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    font-weight: 500;
  }

  .post-tag:hover {
    background-color: var(--primary);
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
  }

  .post-stats {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    color: var(--text-muted);
    font-size: 0.85rem;
  }

  .post-stat {
    display: flex;
    align-items: center;
    gap: 0.4rem;
  }

  .post-date {
    font-size: 0.9rem;
    color: var(--text-muted);
    display: flex;
    align-items: center;
    gap: 0.4rem;
  }

  .post-content {
    padding: 1.8rem;
    color: var(--text-color);
    font-size: 1rem;
    line-height: 1.7;
  }

  /* Post Interaction Elements */
  .post-interactions {
    display: flex;
    align-items: center;
    gap: 1.8rem;
    padding: 1rem 1.8rem;
    border-top: 1px solid #f0f0f0;
    color: var(--text-muted);
    font-size: 0.95rem;
    background-color: #fafafa;
  }

  .interaction-item {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    cursor: pointer;
    transition: var(--transition);
    color: var(--text-muted);
    padding: 0.5rem 1rem;
    border-radius: 30px;
  }

  .interaction-item:hover {
    color: var(--primary);
    background-color: var(--accent-light);
  }

  .interaction-count {
    font-weight: 600;
  }

  /* Empty State */
  .forum-empty-state {
    text-align: center;
    padding: 4rem 1.5rem;
    background-color: white;
    border-radius: var(--border-radius);
    box-shadow: var(--box-shadow);
    transition: var(--transition);
    animation: fadeIn 0.5s ease-out;
  }

  .forum-empty-state:hover {
    box-shadow: var(--box-shadow-hover);
  }

  .empty-icon {
    font-size: 3.5rem;
    color: var(--primary-light);
    margin-bottom: 1.5rem;
    transition: var(--transition);
  }

  .forum-empty-state:hover .empty-icon {
    transform: scale(1.1);
    color: var(--primary);
  }

  .empty-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--primary);
    margin-bottom: 1rem;
  }

  .empty-message {
    color: var(--text-color);
    font-size: 1.1rem;
    margin-bottom: 2rem;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
    line-height: 1.7;
  }

  .empty-action {
    display: inline-flex;
    align-items: center;
    gap: 0.8rem;
    background-color: var(--primary);
    color: white;
    padding: 0.9rem 1.8rem;
    border-radius: 50px;
    font-weight: 600;
    text-decoration: none;
    transition: var(--transition);
    font-size: 1.05rem;
  }

  .empty-action:hover {
    background-color: var(--primary-dark);
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
  }

  /* Pagination */
  .pagination-container {
    margin-top: 2rem;
    margin-bottom: 1rem;
  }

  .pagination-wrapper {
    display: flex;
    justify-content: center;
    gap: 1rem;
  }

  .pagination-button {
    background-color: white;
    border: 2px solid var(--primary);
    color: var(--primary);
    padding: 0.8rem 1.5rem;
    border-radius: 50px;
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition);
    display: flex;
    align-items: center;
    gap: 0.6rem;
  }

  .pagination-button:hover:not(:disabled) {
    background-color: var(--primary);
    color: white;
    transform: translateY(-3px);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  }

  .pagination-button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    border-color: #ccc;
    color: #999;
  }

  /* Floating Action Button */
  .floating-action-button {
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    width: 60px;
    height: 60px;
    background-color: var(--primary);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    cursor: pointer;
    transition: var(--transition);
    z-index: 1000;
    font-size: 1.5rem;
    display: none;
  }

  .floating-action-button:hover {
    background-color: var(--primary-dark);
    transform: scale(1.1) rotate(90deg);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
  }

  /* Modal Styling */
  .modal-content {
    border-radius: 15px;
    border: none;
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
    overflow: hidden;
  }

  .modal-header {
    background-color: var(--primary);
    color: white;
    border-radius: 15px 15px 0 0;
    padding: 1.5rem 1.8rem;
  }

  .modal-title {
    font-weight: 700;
    font-size: 1.3rem;
  }

  .modal-close {
    color: white;
    opacity: 0.8;
    transition: var(--transition);
  }

  .modal-close:hover {
    color: white;
    opacity: 1;
    transform: rotate(90deg);
  }

  .modal-body {
    padding: 1.8rem;
  }

  .modal-footer {
    padding: 1.2rem 1.8rem;
    border-top: 1px solid #eee;
  }

  .form-label {
    font-weight: 600;
    color: var(--primary);
    margin-bottom: 0.8rem;
    font-size: 1rem;
  }

  .form-control {
    border: 1px solid #e0e0e0;
    border-radius: 10px;
    padding: 12px 18px;
    transition: var(--transition);
    color: var(--text-color);
    background-color: #f5f7fa;
    font-size: 1rem;
  }

  .form-control:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(44, 110, 73, 0.1);
    background-color: white;
  }

  .form-text {
    color: var(--text-muted);
    font-size: 0.85rem;
    margin-top: 0.5rem;
  }

  .btn-primary-custom {
    background-color: var(--primary);
    border: none;
    border-radius: 10px;
    padding: 12px 24px;
    font-weight: 600;
    transition: var(--transition);
    color: white;
    font-size: 1rem;
  }

  .btn-primary-custom:hover {
    background-color: var(--primary-dark);
    transform: translateY(-3px);
    box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
  }

  .selected-tags {
    margin-top: 1.2rem;
    padding: 0;
    list-style: none;
    display: flex;
    flex-wrap: wrap;
    gap: 0.6rem;
  }

  .selected-tags li {
    background-color: var(--accent-light);
    padding: 6px 16px;
    border-radius: 30px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 0.8rem;
    color: var(--primary);
    font-weight: 500;
    transition: var(--transition);
  }

  .selected-tags li:hover {
    background-color: rgba(44, 110, 73, 0.15);
  }

  .remove-tag {
    background: none;
    border: none;
    cursor: pointer;
    color: var(--primary);
    transition: var(--transition);
    display: flex;
    align-items: center;
    justify-content: center;
    width: 22px;
    height: 22px;
    border-radius: 50%;
  }

  .remove-tag:hover {
    color: #dc3545;
    background-color: rgba(220, 53, 69, 0.1);
  }

  /* Animations */
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slideInLeft {
    from {
      opacity: 0;
      transform: translateX(-30px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes slideInRight {
    from {
      opacity: 0;
      transform: translateX(30px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes pulse {
    0% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.05);
    }
    100% {
      transform: scale(1);
    }
  }

  .fade-in {
    animation: fadeIn 0.5s ease-out forwards;
  }

  .slide-left {
    animation: slideInLeft 0.5s ease-out forwards;
  }

  .slide-right {
    animation: slideInRight 0.5s ease-out forwards;
  }

  .pulse {
    animation: pulse 2s infinite;
  }

  /* Animation delays for staggered appearance */
  [data-aos-delay="50"] { animation-delay: 50ms; }
  [data-aos-delay="100"] { animation-delay: 100ms; }
  [data-aos-delay="150"] { animation-delay: 150ms; }
  [data-aos-delay="200"] { animation-delay: 200ms; }
  [data-aos-delay="250"] { animation-delay: 250ms; }
  [data-aos-delay="300"] { animation-delay: 300ms; }

  /* Responsiveness */
  @media (max-width: 992px) {
    .forum-title {
      font-size: 2.2rem;
    }
    
    .forum-subtitle {
      font-size: 1.1rem;
    }
    
    .search-container {
      flex-direction: column;
      gap: 1rem;
    }
    
    .filter-dropdown, .search-button {
      width: 100%;
    }
    
    .filter-button, .search-button {
      justify-content: center;
    }
    
    .post-author {
      flex-direction: column;
      align-items: flex-start;
      gap: 0.3rem;
    }
    
    .floating-action-button {
      display: flex;
    }
  }

  @media (max-width: 768px) {
    .main-content {
      padding: 2rem 0 6rem;
    }
    
    .forum-header {
      height: 300px;
    }
    
    .forum-header-content {
      padding: 2rem 1.5rem;
    }
    
    .forum-title {
      font-size: 1.8rem;
    }
    
    .forum-subtitle {
      font-size: 1rem;
    }
    
    .forum-tab {
      padding: 1rem 1.2rem;
      font-size: 0.9rem;
    }
    
    .post-header {
      flex-direction: column;
    }
    
    .post-avatar {
      margin-right: 0;
      margin-bottom: 1rem;
    }
    
    .post-title {
      font-size: 1.1rem;
    }
    
    .post-interactions {
      flex-wrap: wrap;
      gap: 0.5rem;
      justify-content: space-between;
    }
    
    .interaction-item {
      padding: 0.4rem 0.8rem;
      font-size: 0.85rem;
    }
    
    .filter-row {
      grid-template-columns: 1fr;
    }
    
    .filter-actions {
      flex-direction: column;
      gap: 0.8rem;
    }
    
    .filter-button-sec,
    .search-button {
      width: 100%;
    }
    
    .pagination-wrapper {
      flex-direction: column;
      gap: 0.8rem;
    }
    
    .pagination-button {
      width: 100%;
      justify-content: center;
    }
  }
</style>
{% endblock %} {% block content %}
<div class="main-content">
  <div class="container">
    <!-- Forum Header Section -->
    <div class="forum-header" data-aos="fade-up">
      <img
        src="{% static 'assets/images/goma.JPG' %}"
        alt="AANR Forum"
        class="forum-background-img"
      />
      <div class="forum-header-content">
        <h1 class="forum-title">AANR Knowledge Community Forum</h1>
        <p class="forum-subtitle">
          Join the conversation and grow your knowledge in Agriculture, Aquatic,
          and Natural Resources!
        </p>
        <button
          id="toggle-discussion"
          class="ask-question-btn"
          data-toggle="modal"
          data-target="#questionModal"
        >
          <i class="fas fa-plus-circle"></i> Ask Your Question
        </button>
      </div>
    </div>

    <!-- Search Section -->
    <div class="search-section" data-aos="fade-up" data-aos-delay="100">
      <div class="search-container">
        <div class="search-input-wrapper">
          <input
            type="text"
            id="search_term"
            class="search-input"
            placeholder="What's on your mind? Search for topics..."
          />
          <i class="fas fa-search search-icon"></i>
        </div>

        <div class="filter-dropdown">
          <button class="filter-button" id="filterButton">
            <i class="fas fa-filter"></i> Filter by Commodity
            <i class="fas fa-chevron-down"></i>
          </button>
          <div class="filter-menu" id="filterMenu">
            <div class="filter-item">
              <label>
                <input
                  type="checkbox"
                  name="commodity"
                  value="all"
                  class="filter-checkbox"
                  checked
                />
                All Commodities
              </label>
            </div>
            <div class="filter-item">
              <label>
                <input
                  type="checkbox"
                  name="commodity"
                  value="1"
                  class="filter-checkbox"
                />
                Rice
              </label>
            </div>
            <div class="filter-item">
              <label>
                <input
                  type="checkbox"
                  name="commodity"
                  value="2"
                  class="filter-checkbox"
                />
                Corn
              </label>
            </div>
            <div class="filter-item">
              <label>
                <input
                  type="checkbox"
                  name="commodity"
                  value="3"
                  class="filter-checkbox"
                />
                Coconut
              </label>
            </div>
            <div class="filter-item">
              <label>
                <input
                  type="checkbox"
                  name="commodity"
                  value="4"
                  class="filter-checkbox"
                />
                Aquaculture
              </label>
            </div>
            <div class="filter-item">
              <label>
                <input
                  type="checkbox"
                  name="commodity"
                  value="5"
                  class="filter-checkbox"
                />
                Livestock
              </label>
            </div>
          </div>
        </div>

        <button class="search-button" id="search_button">
          <i class="fas fa-search"></i> Search
        </button>
      </div>
    </div>

    <!-- Topic Pills Section -->
    <div class="row">
      <div class="col-md-12">
        <!-- Topic Pills -->
        <div class="topic-pills" data-aos="fade-up" data-aos-delay="150">
          <div class="topic-pill active">All Topics</div>
          <div class="topic-pill">Crops</div>
          <div class="topic-pill">Livestock</div>
          <div class="topic-pill">Aquaculture</div>
          <div class="topic-pill">Technology</div>
          <div class="topic-pill">Market & Economics</div>
          <div class="topic-pill">Climate & Environment</div>
        </div>

        <!-- Tab Navigation -->
        <div class="forum-tabs" data-aos="fade-up" data-aos-delay="250">
          <button
            class="forum-tab active"
            id="newQuestions-tab"
            data-target="newQuestions"
          >
            <i class="fas fa-clock"></i> New Questions
          </button>
          <button
            class="forum-tab"
            id="popularQuestions-tab"
            data-target="popularQuestions"
          >
            <i class="fas fa-fire"></i> Popular Questions
          </button>
          <button
            class="forum-tab"
            id="myQuestions-tab"
            data-target="myQuestions"
          >
            <i class="fas fa-user-circle"></i> My Questions
          </button>
        </div>

        <!-- Display Controls -->
        <div class="display-controls" data-aos="fade-up" data-aos-delay="300">
          <div class="items-per-page">
            <label for="itemCount">Show:</label>
            <select id="itemCount" class="items-select" onchange="updateDisplay()">
              <option value="5">5 items</option>
              <option value="10" selected>10 items</option>
              <option value="20">20 items</option>
            </select>
          </div>
        </div>

        <!-- Forum Posts -->
        <div
          class="forum-posts"
          id="newQuestions"
          data-aos="fade-up"
          data-aos-delay="350"
        >
          <!-- Enhanced Post Card with Interactions -->
          <div class="post-card discussion-post fade-in" data-tags="1,4">
            <div class="post-header">
              <div class="post-avatar">
                <img
                  src="{% static 'assets/images/default_profile.png' %}"
                  alt="User Avatar"
                />
              </div>
              <div class="post-meta">
                <div class="post-author">
                  <span class="author-name">Miguel Fernandez</span>
                  <span class="author-role">Verified Farmer</span>
                </div>
                <a href="#" class="post-title"
                  >INTEGRATED PEST MANAGEMENT FOR ORGANIC RICE FARMING</a
                >
                <span class="thread-status status-resolved">Resolved</span>
                <div class="post-tags">
                  <a href="#" class="post-tag"><i class="fas fa-leaf"></i> Rice</a>
                  <a href="#" class="post-tag"
                    ><i class="fas fa-bug"></i> Pest Management</a
                  >
                  <a href="#" class="post-tag"
                    ><i class="fas fa-seedling"></i> Organic</a
                  >
                </div>
                <div class="post-stats">
                  <span class="post-stat"
                    ><i class="far fa-calendar-alt"></i> March 5, 2025</span
                  >
                  <span class="post-stat"><i class="far fa-eye"></i> 342 views</span>
                  <span class="post-stat"
                    ><i class="far fa-comment"></i> 18 replies</span
                  >
                </div>
              </div>
            </div>
            <div class="post-content">
              <p>
                I'm transitioning my 2-hectare rice farm to organic production and
                struggling with pest management. Chemical pesticides are no longer an
                option, but I'm seeing increased damage from stem borers and
                leafhoppers. I've tried neem oil sprays with limited success. What
                integrated pest management strategies have worked for other organic
                rice farmers in similar tropical conditions?
              </p>
            </div>
            <div class="post-interactions">
              <div class="interaction-item">
                <i class="far fa-thumbs-up"></i>
                <span class="interaction-count">24</span>
              </div>
              <div class="interaction-item">
                <i class="far fa-comment-dots"></i>
                <span class="interaction-count">18</span>
              </div>
              <div class="interaction-item">
                <i class="far fa-bookmark"></i>
                <span>Save</span>
              </div>
              <div class="interaction-item">
                <i class="fas fa-share-alt"></i>
                <span>Share</span>
              </div>
            </div>
          </div>

          <!-- Post 1 -->
          <div class="post-card discussion-post slide-left" data-tags="1,4" data-aos-delay="50">
            <div class="post-header">
              <div class="post-avatar">
                <img
                  src="{% static 'assets/images/default_profile.png' %}"
                  alt="User Avatar"
                />
              </div>
              <div class="post-meta">
                <div class="post-author">
                  <span class="author-name">Carlos Rivera</span>
                  <span class="author-role">Agronomist</span>
                </div>
                <a href="#" class="post-title"
                  >BEST PRACTICES FOR SUSTAINABLE RICE FARMING</a
                >
                <div class="post-tags">
                  <a href="#" class="post-tag"><i class="fas fa-leaf"></i> Rice</a>
                  <a href="#" class="post-tag"><i class="fas fa-tractor"></i> Farming</a>
                  <a href="#" class="post-tag"><i class="fas fa-seedling"></i> Sustainable</a>
                </div>
                <div class="post-stats">
                  <span class="post-stat"
                    ><i class="far fa-calendar-alt"></i> March 20, 2025</span
                  >
                  <span class="post-stat"><i class="far fa-eye"></i> 156 views</span>
                  <span class="post-stat"
                    ><i class="far fa-comment"></i> 7 replies</span
                  >
                </div>
              </div>
            </div>
            <div class="post-content">
              <p>
                I've been growing rice for 5 years using traditional methods, but
                I'm looking to transition to more sustainable practices. What
                techniques are farmers using to reduce water usage while maintaining
                good yields? Are there specific varieties that perform better with
                less environmental impact?
              </p>
            </div>
            <div class="post-interactions">
              <div class="interaction-item">
                <i class="far fa-thumbs-up"></i>
                <span class="interaction-count">12</span>
              </div>
              <div class="interaction-item">
                <i class="far fa-comment-dots"></i>
                <span class="interaction-count">7</span>
              </div>
              <div class="interaction-item">
                <i class="far fa-bookmark"></i>
                <span>Save</span>
              </div>
              <div class="interaction-item">
                <i class="fas fa-share-alt"></i>
                <span>Share</span>
              </div>
            </div>
          </div>

          <!-- Post 2 -->
          <div class="post-card discussion-post slide-right" data-tags="3,5" data-aos-delay="100">
            <div class="post-header">
              <div class="post-avatar">
                <img
                  src="{% static 'assets/images/default_profile.png' %}"
                  alt="User Avatar"
                />
              </div>
              <div class="post-meta">
                <div class="post-author">
                  <span class="author-name">Maria Santos</span>
                  <span class="author-role">Coconut Farmer</span>
                </div>
                <a href="#" class="post-title"
                  >COMBATING COCONUT SCALE INSECT INFESTATION</a
                >
                <div class="post-tags">
                  <a href="#" class="post-tag"><i class="fas fa-tree"></i> Coconut</a>
                  <a href="#" class="post-tag"><i class="fas fa-bug"></i> Pest Management</a>
                </div>
                <div class="post-stats">
                  <span class="post-stat"
                    ><i class="far fa-calendar-alt"></i> March 18, 2025</span
                  >
                  <span class="post-stat"><i class="far fa-eye"></i> 203 views</span>
                  <span class="post-stat"
                    ><i class="far fa-comment"></i> 15 replies</span
                  >
                </div>
              </div>
            </div>
            <div class="post-content">
              <p>
                My coconut plantation has been showing signs of scale insect
                infestation. The leaves are turning yellow and productivity is
                declining. I've tried some common pesticides but they don't seem
                effective. Has anyone successfully dealt with this issue using
                organic or integrated pest management approaches?
              </p>
            </div>
            <div class="post-interactions">
              <div class="interaction-item">
                <i class="far fa-thumbs-up"></i>
                <span class="interaction-count">19</span>
              </div>
              <div class="interaction-item">
                <i class="far fa-comment-dots"></i>
                <span class="interaction-count">15</span>
              </div>
              <div class="interaction-item">
                <i class="far fa-bookmark"></i>
                <span>Save</span>
              </div>
              <div class="interaction-item">
                <i class="fas fa-share-alt"></i>
                <span>Share</span>
              </div>
            </div>
          </div>

          <!-- Post 3 -->
          <div class="post-card discussion-post fade-in" data-tags="4" data-aos-delay="150">
            <div class="post-header">
              <div class="post-avatar">
                <img
                  src="{% static 'assets/images/default_profile.png' %}"
                  alt="User Avatar"
                />
              </div>
              <div class="post-meta">
                <div class="post-author">
                  <span class="author-name">Pedro Aquino</span>
                  <span class="author-role">Fish Farmer</span>
                </div>
                <a href="#" class="post-title"
                  >OPTIMAL STOCKING DENSITY FOR TILAPIA IN SMALL-SCALE
                  AQUACULTURE</a
                >
                <div class="post-tags">
                  <a href="#" class="post-tag"><i class="fas fa-fish"></i> Aquaculture</a>
                  <a href="#" class="post-tag"><i class="fas fa-water"></i> Tilapia</a>
                </div>
                <div class="post-stats">
                  <span class="post-stat"
                    ><i class="far fa-calendar-alt"></i> March 15, 2025</span
                  >
                  <span class="post-stat"><i class="far fa-eye"></i> 189 views</span>
                  <span class="post-stat"
                    ><i class="far fa-comment"></i> 11 replies</span
                  >
                </div>
              </div>
            </div>
            <div class="post-content">
              <p>
                I'm setting up a small-scale tilapia pond (approximately 100 square
                meters) and I'm trying to determine the optimal stocking density. I
                want to maximize production without sacrificing fish health or water
                quality. What density would you recommend for beginners, and what
                management practices should I implement to maintain good water
                conditions?
              </p>
            </div>
            <div class="post-interactions">
              <div class="interaction-item">
                <i class="far fa-thumbs-up"></i>
                <span class="interaction-count">16</span>
              </div>
              <div class="interaction-item">
                <i class="far fa-comment-dots"></i>
                <span class="interaction-count">11</span>
              </div>
              <div class="interaction-item">
                <i class="far fa-bookmark"></i>
                <span>Save</span>
              </div>
              <div class="interaction-item">
                <i class="fas fa-share-alt"></i>
                <span>Share</span>
              </div>
            </div>
          </div>

          <!-- More posts... -->
        </div>

        <!-- Popular Questions Tab (Hidden Initially) -->
        <div class="forum-posts" id="popularQuestions" style="display: none">
          <!-- Popular Posts... -->
        </div>
        
        <!-- My Questions Tab (Hidden Initially) -->
        <div class="forum-posts" id="myQuestions" style="display: none">
          <!-- Empty State for My Questions -->
          <div class="forum-empty-state">
            <div class="empty-icon">
              <i class="far fa-comment-dots"></i>
            </div>
            <h3 class="empty-title">You haven't asked any questions yet</h3>
            <p class="empty-message">
              Start engaging with the community by asking your first question. Our community of experts and fellow farmers are ready to help!
            </p>
            <button
              class="empty-action"
              data-toggle="modal"
              data-target="#questionModal"
            >
              <i class="fas fa-plus-circle"></i> Ask Your First Question
            </button>
          </div>
        </div>

        <!-- Pagination -->
        <div class="pagination-container" data-aos="fade-up" data-aos-delay="400">
          <div class="pagination-wrapper">
            <button
              class="pagination-button"
              id="backBtn"
              onclick="movePage('back')"
              disabled
            >
              <i class="fas fa-chevron-left"></i> Previous
            </button>
            <button
              class="pagination-button"
              id="nextBtn"
              onclick="movePage('next')"
            >
              Next <i class="fas fa-chevron-right"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Floating Action Button for Mobile -->
<div
  class="floating-action-button"
  data-toggle="modal"
  data-target="#questionModal"
>
  <i class="fas fa-plus"></i>
</div>

<!-- Question Modal -->
<div
  class="modal fade"
  id="questionModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="questionModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="questionModalLabel">Ask a Question</h5>
        <button
          type="button"
          class="close modal-close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="questionForm">
          <div class="form-group">
            <label for="questionTitle" class="form-label">Question Title</label>
            <input
              type="text"
              class="form-control"
              id="questionTitle"
              placeholder="Enter a clear, specific title for your question"
            />
          </div>
          <div class="form-group">
            <label for="questionDetails" class="form-label"
              >Question Details</label
            >
            <textarea
              class="form-control"
              id="questionDetails"
              rows="6"
              placeholder="Describe your question in detail. Include relevant information like location, current practices, and specific challenges."
            ></textarea>
          </div>
          <div class="form-group">
            <label for="commoditySelect" class="form-label"
              >Related Commodities</label
            >
            <select class="form-control" id="commoditySelect">
              <option value="">Select a commodity</option>
              <option value="1">Rice</option>
              <option value="2">Corn</option>
              <option value="3">Coconut</option>
              <option value="4">Aquaculture</option>
              <option value="5">Livestock</option>
            </select>
            <small class="form-text text-muted"
              >You can select multiple commodities, one at a time</small
            >
          </div>
          <div class="selected-commodities">
            <p class="mb-2">Selected Commodities:</p>
            <ul id="selected-commodity" class="selected-tags"></ul>
            <input type="hidden" id="commodity_ids" name="commodity_ids" />
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">
          Cancel
        </button>
        <button
          type="button"
          class="btn btn-primary btn-primary-custom"
          id="submitQuestion"
        >
          Post Question
        </button>
      </div>
    </div>
  </div>
</div>

{% endblock %} {% block script %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
<script>
  // Initialize AOS
  document.addEventListener('DOMContentLoaded', function() {
    AOS.init({
      duration: 800,
      once: true,
      offset: 100,
      easing: 'ease-out-cubic'
    });
    
    // Initialize the forum functionality
    initForum();
  });
  
  function initForum() {
    // Filter dropdown toggle
    const filterButton = document.getElementById('filterButton');
    const filterMenu = document.getElementById('filterMenu');
    
    filterButton.addEventListener('click', function() {
      filterMenu.classList.toggle('show');
    });
    
    // Close the dropdown if clicked outside
    document.addEventListener('click', function(event) {
      if (!filterButton.contains(event.target) && !filterMenu.contains(event.target)) {
        filterMenu.classList.remove('show');
      }
    });
    
    // Tab functionality
    const tabButtons = document.querySelectorAll('.forum-tab');
    const tabContents = document.querySelectorAll('.forum-posts');
    
    tabButtons.forEach(button => {
      button.addEventListener('click', function() {
        // Remove active class from all tabs
        tabButtons.forEach(btn => btn.classList.remove('active'));
        
        // Add active class to clicked tab
        this.classList.add('active');
        
        // Get the target content
        const targetId = this.getAttribute('data-target');
        
        // Hide all content
        tabContents.forEach(content => {
          content.style.display = 'none';
        });
        
        // Show the target content
        document.getElementById(targetId).style.display = 'flex';
      });
    });
    
    // Topic pill selection
    const topicPills = document.querySelectorAll('.topic-pill');
    
    topicPills.forEach(pill => {
      pill.addEventListener('click', function() {
        // Remove active class from all pills
        topicPills.forEach(p => p.classList.remove('active'));
        
        // Add active class to clicked pill
        this.classList.add('active');
      });
    });
    
    // Question form functionality
    const commoditySelect = document.getElementById('commoditySelect');
    const selectedCommodityList = document.getElementById('selected-commodity');
    const commodityIdsInput = document.getElementById('commodity_ids');
    
    if (commoditySelect && selectedCommodityList) {
      const selectedCommodities = new Set();
      
      commoditySelect.addEventListener('change', function() {
        const value = this.value;
        const text = this.options[this.selectedIndex].text;
        
        if (value && !selectedCommodities.has(value)) {
          // Add to set
          selectedCommodities.add(value);
          
          // Create list item
          const li = document.createElement('li');
          li.dataset.value = value;
          li.innerHTML = `
            ${text}
            <button type="button" class="remove-tag">
              <i class="fas fa-times"></i>
            </button>
          `;
          
          // Add remove event
          li.querySelector('.remove-tag').addEventListener('click', function() {
            selectedCommodities.delete(value);
            li.remove();
            updateCommodityIds();
          });
          
          // Add to list
          selectedCommodityList.appendChild(li);
          
          // Update hidden input
          updateCommodityIds();
          
          // Reset select
          commoditySelect.selectedIndex = 0;
        }
      });
      
      function updateCommodityIds() {
        commodityIdsInput.value = Array.from(selectedCommodities).join(',');
      }
    }
    
    // Submit question button animation
    const submitQuestionBtn = document.getElementById('submitQuestion');
    
    if (submitQuestionBtn) {
      submitQuestionBtn.addEventListener('click', function() {
        // Add loading state
        this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Posting...';
        this.disabled = true;
        
        // Simulate form submission delay
        setTimeout(() => {
          // Reset button
          this.innerHTML = 'Post Question';
          this.disabled = false;
          
          // Close modal (in a real app, this would happen after successful submission)
          $('#questionModal').modal('hide');
          
          // Show success notification (you would add this HTML)
          showNotification('Question posted successfully!', 'success');
        }, 1500);
      });
    }
  }
  
  // Function to handle pagination
  function movePage(direction) {
    const backBtn = document.getElementById('backBtn');
    const nextBtn = document.getElementById('nextBtn');
    
    // This is a simplified pagination for demo
    // In a real app, you would load new content via AJAX
    
    if (direction === 'next') {
      // Disable next button to simulate last page
      nextBtn.disabled = true;
      backBtn.disabled = false;
      
      // Animate out current posts
      const posts = document.querySelectorAll('.post-card');
      posts.forEach((post, index) => {
        setTimeout(() => {
          post.style.opacity = '0';
          post.style.transform = 'translateY(20px)';
        }, index * 100);
      });
      
      // Simulate loading new posts
      setTimeout(() => {
        showNotification('You\'ve reached the end of available posts', 'info');
        
        // Restore posts visibility
        posts.forEach((post, index) => {
          setTimeout(() => {
            post.style.opacity = '1';
            post.style.transform = 'translateY(0)';
          }, index * 100);
        });
      }, 800);
    } else {
      // Go back
      nextBtn.disabled = false;
      backBtn.disabled = true;
    }
  }
  
  // Notification function
  function showNotification(message, type = 'info') {
    // Create notification element if it doesn't exist
    let notification = document.querySelector('.notification');
    
    if (!notification) {
      notification = document.createElement('div');
      notification.className = 'notification';
      document.body.appendChild(notification);
      
      // Add styles to the notification element
      notification.style.position = 'fixed';
      notification.style.bottom = '20px';
      notification.style.right = '20px';
      notification.style.padding = '15px 25px';
      notification.style.borderRadius = '10px';
      notification.style.boxShadow = '0 5px 15px rgba(0,0,0,0.2)';
      notification.style.zIndex = '9999';
      notification.style.fontWeight = '500';
      notification.style.transition = 'all 0.3s ease-in-out';
      notification.style.opacity = '0';
      notification.style.transform = 'translateY(20px)';
    }
    
    // Set the message
    notification.textContent = message;
    
    // Set the notification type
    if (type === 'success') {
      notification.style.backgroundColor = '#2c6e49';
      notification.style.color = 'white';
    } else if (type === 'error') {
      notification.style.backgroundColor = '#dc3545';
      notification.style.color = 'white';
    } else {
      notification.style.backgroundColor = '#f8f9fa';
      notification.style.color = '#333';
      notification.style.border = '1px solid #ddd';
    }
    
    // Show the notification
    setTimeout(() => {
      notification.style.opacity = '1';
      notification.style.transform = 'translateY(0)';
    }, 100);
    
    // Hide the notification after 3 seconds
    setTimeout(() => {
      notification.style.opacity = '0';
      notification.style.transform = 'translateY(20px)';
    }, 3000);
  }
</script>
<script src="{% static 'style/js/cmi-forum.js' %}"></script>
{% endblock %}